"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5849],{5849:(fi,v,r)=>{r.r(v),r.d(v,{CondicionActualPageModule:()=>mi});var m=r(177),b=r(9417),s=r(9364),_=r(5260),f=r(467),i=r(4438),C=r(7762),x=r(3804),P=r(4820),F=r(7468),p=r(5519),M=r(8093),j=r(2490),R=r(3797),$=r(1247),A=r(8152),E=r(5609);function T(o,e){1&o&&i.nrm(0,"img",19)}function k(o,e){1&o&&i.nrm(0,"img",20)}function G(o,e){1&o&&i.nrm(0,"img",21)}function I(o,e){if(1&o&&(i.j41(0,"ion-item")(1,"ion-avatar",2),i.DNE(2,T,1,0,"img",16),i.nrm(3,"br"),i.j41(4,"ion-note"),i.EFF(5),i.k0s(),i.DNE(6,k,1,0,"img",17)(7,G,1,0,"img",18),i.k0s(),i.j41(8,"ion-label")(9,"h4"),i.EFF(10),i.k0s(),i.j41(11,"p"),i.EFF(12),i.k0s(),i.j41(13,"p"),i.EFF(14),i.k0s()()()),2&o){const n=e.$implicit;i.R7$(2),i.Y8G("ngIf","Aviso"===n.tipo),i.R7$(3),i.JRh(n.tipo),i.R7$(),i.Y8G("ngIf","Alerta"===n.tipo),i.R7$(),i.Y8G("ngIf","Alarma"===n.tipo),i.R7$(3),i.JRh(n.partes[1]),i.R7$(2),i.JRh(n.partes[4]),i.R7$(2),i.JRh(n.partes[5])}}function y(o,e){if(1&o){const n=i.RV6();i.j41(0,"ion-content")(1,"ion-toolbar")(2,"ion-title"),i.EFF(3,"Notificaciones"),i.k0s(),i.j41(4,"ion-buttons",12)(5,"ion-button",13),i.bIt("click",function(){i.eBV(n),i.XpG();const a=i.sdS(10);return i.Njj(a.dismiss())}),i.nrm(6,"ion-icon",14),i.k0s()()(),i.j41(7,"ion-list"),i.DNE(8,I,15,7,"ion-item",15),i.k0s()()}if(2&o){const n=i.XpG();i.R7$(8),i.Y8G("ngForOf",n.notificacionFinal)}}function L(o,e){if(1&o&&(i.j41(0,"ion-card-header",27)(1,"h1",28)(2,"strong"),i.EFF(3),i.k0s()(),i.j41(4,"div",29)(5,"div",30),i.nrm(6,"img",31)(7,"br"),i.j41(8,"strong"),i.EFF(9),i.k0s()(),i.j41(10,"div",28),i.nrm(11,"img",31)(12,"br"),i.j41(13,"strong"),i.EFF(14),i.k0s()()(),i.j41(15,"h2",28),i.EFF(16),i.k0s()()),2&o){const n=i.XpG(2);i.R7$(3),i.JRh(n.nombreLocalidad),i.R7$(3),i.Y8G("src","assets/infosol/salida.png",i.B4B),i.R7$(3),i.SpI("Salida ",n.infoSol.salida,""),i.R7$(2),i.Y8G("src","assets/infosol/puesta.png",i.B4B),i.R7$(3),i.SpI("Puesta ",n.infoSol.puesta,""),i.R7$(2),i.JRh(n.fechaActualizado)}}function D(o,e){if(1&o&&(i.j41(0,"h2",44),i.EFF(1),i.j41(2,"sup",45),i.EFF(3,"\xb0C"),i.k0s()()),2&o){const n=i.XpG(3);i.R7$(),i.SpI(" ",n.redondearTemperatura(),"")}}function O(o,e){if(1&o&&(i.j41(0,"h2",44),i.EFF(1),i.j41(2,"sup",45),i.EFF(3,"\xb0F"),i.k0s()()),2&o){const n=i.XpG(3);i.R7$(),i.SpI(" ",n.celsiusToFahrenheit(n.redondearTemperatura()),"")}}function Y(o,e){if(1&o&&i.nrm(0,"img",46),2&o){const n=i.XpG(3);i.Y8G("src","assets/iconosclima/"+n.objetoCondicion.condicionIcono,i.B4B)}}function N(o,e){1&o&&i.nrm(0,"img",47),2&o&&i.Y8G("src","assets/iconosclima/vacio.png",i.B4B)}function S(o,e){if(1&o&&(i.j41(0,"ion-col")(1,"p",41)(2,"strong"),i.EFF(3),i.k0s()()()),2&o){const n=i.XpG(3);i.R7$(3),i.SpI("UV ",n.datosPronosLocalidad.indiceUV.calificador,"")}}function B(o,e){1&o&&(i.j41(0,"ion-col")(1,"p",41)(2,"strong"),i.EFF(3,"No disp"),i.k0s()()())}function w(o,e){1&o&&(i.j41(0,"p",41)(1,"strong"),i.EFF(2," No disp"),i.k0s()())}function X(o,e){if(1&o&&(i.j41(0,"ion-col")(1,"p",41)(2,"strong"),i.EFF(3),i.k0s()()()),2&o){const n=i.XpG(3);i.R7$(3),i.Lme("",n.vientoCondicion," ",n.vientoFuerza,"Km/h")}}function V(o,e){if(1&o&&(i.j41(0,"ion-col")(1,"p",41)(2,"strong"),i.EFF(3),i.k0s()()()),2&o){const n=i.XpG(3);i.R7$(3),i.Lme("",n.vientoCondicion," ",n.kmhtoMph(n.vientoFuerza),"Mph")}}function U(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit;i.R7$(2),i.E5c("",n.dia," \u2022 Min: ",n.temperaturaMinima,"\xb0C \u2022 Max: ",n.temperaturaMaxima,"\xb0C ")}}function z(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit;i.R7$(2),i.Lme(" ",n.dia," \u2022 Max: ",n.temperaturaMaxima,"\xb0C ")}}function J(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit,t=i.XpG(4);i.R7$(2),i.E5c("",n.dia," \u2022 Min: ",t.celsiusToFahrenheit(n.temperaturaMinima),"\xb0F \u2022 Max: ",t.celsiusToFahrenheit(n.temperaturaMaxima),"\xb0F")}}function H(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit,t=i.XpG(4);i.R7$(2),i.Lme(" ",n.dia," \u2022 Max: ",t.celsiusToFahrenheit(n.temperaturaMaxima),"\xb0F")}}function W(o,e){if(1&o&&i.nrm(0,"img",54),2&o){const n=i.XpG().$implicit;i.Y8G("src","assets/iconosclima/"+n.icono,i.B4B)}}function Q(o,e){1&o&&i.nrm(0,"img",54),2&o&&i.Y8G("src","assets/iconosclima/vacio.png",i.B4B)}function K(o,e){if(1&o&&(i.j41(0,"ion-col"),i.DNE(1,W,1,1,"img",53)(2,Q,1,1,"img",53),i.k0s()),2&o){const n=e.$implicit;i.R7$(),i.Y8G("ngIf",n.icono),i.R7$(),i.Y8G("ngIf",!n.icono)}}function Z(o,e){if(1&o&&(i.j41(0,"ion-col")(1,"p")(2,"strong"),i.EFF(3),i.k0s()()()),2&o){const n=e.$implicit;i.R7$(3),i.JRh(n)}}function q(o,e){if(1&o&&(i.j41(0,"ion-card",50)(1,"ion-card-header",51),i.DNE(2,U,3,3,"ion-card-subtitle",25)(3,z,3,2,"ion-card-subtitle",25)(4,J,3,3,"ion-card-subtitle",25)(5,H,3,2,"ion-card-subtitle",25),i.k0s(),i.j41(6,"ion-card-content",52)(7,"ion-row",28),i.DNE(8,K,3,2,"ion-col",15),i.k0s(),i.j41(9,"ion-row",28),i.DNE(10,Z,4,1,"ion-col",15),i.k0s()()()),2&o){const n=e.$implicit,t=i.XpG(4);i.R7$(2),i.Y8G("ngIf",n.temperaturaMinima&&!t.tipoTemp),i.R7$(),i.Y8G("ngIf",!n.temperaturaMinima&&!t.tipoTemp),i.R7$(),i.Y8G("ngIf",n.temperaturaMinima&&t.tipoTemp),i.R7$(),i.Y8G("ngIf",!n.temperaturaMinima&&t.tipoTemp),i.R7$(3),i.Y8G("ngForOf",n.pronosticodetalle),i.R7$(2),i.Y8G("ngForOf",t.horasDias)}}function ii(o,e){if(1&o&&(i.j41(0,"div",48)(1,"h1",28)(2,"strong"),i.EFF(3,"Pron\xf3sticos"),i.k0s()(),i.j41(4,"p",28)(5,"strong"),i.EFF(6),i.k0s()(),i.DNE(7,q,11,6,"ion-card",49),i.k0s()),2&o){const n=i.XpG(3);i.R7$(6),i.SpI(" ",n.pronosticos[0].timestamp," "),i.R7$(),i.Y8G("ngForOf",n.pronosticos)}}function oi(o,e){if(1&o&&(i.j41(0,"ion-card-content")(1,"ion-grid")(2,"ion-row"),i.nrm(3,"ion-col"),i.j41(4,"ion-col"),i.DNE(5,D,4,1,"h2",32)(6,O,4,1,"h2",33),i.k0s(),i.nrm(7,"ion-col"),i.k0s()(),i.j41(8,"ion-grid",34)(9,"ion-row",35)(10,"ion-col"),i.nrm(11,"img",36),i.k0s(),i.j41(12,"ion-col"),i.DNE(13,Y,1,1,"img",37)(14,N,1,1,"img",38),i.k0s(),i.j41(15,"ion-col"),i.nrm(16,"img",39),i.k0s(),i.j41(17,"ion-col"),i.nrm(18,"img",40),i.k0s()()(),i.j41(19,"ion-grid")(20,"ion-row"),i.DNE(21,S,4,1,"ion-col",25)(22,B,4,0,"ion-col",25),i.j41(23,"ion-col")(24,"p",41)(25,"strong"),i.EFF(26),i.k0s()(),i.DNE(27,w,3,0,"p",42),i.k0s(),i.DNE(28,X,4,2,"ion-col",25)(29,V,4,2,"ion-col",25),i.j41(30,"ion-col")(31,"p",41)(32,"strong"),i.EFF(33),i.k0s()()()()(),i.DNE(34,ii,8,2,"div",43),i.k0s()),2&o){const n=i.XpG(2);i.R7$(5),i.Y8G("ngIf",!n.tipoTemp),i.R7$(),i.Y8G("ngIf",n.tipoTemp),i.R7$(5),i.Y8G("src",null!=n.datosPronosLocalidad.indiceUV&&n.datosPronosLocalidad.indiceUV.indice?"assets/iconosuv/"+n.datosPronosLocalidad.indiceUV.indice+".png":"assets/iconosclima/vacio.png",i.B4B),i.R7$(2),i.Y8G("ngIf",n.objetoCondicion.condicionIcono),i.R7$(),i.Y8G("ngIf",!n.objetoCondicion.condicionIcono),i.R7$(2),i.Y8G("src",n.iconoViento,i.B4B),i.R7$(5),i.Y8G("ngIf",null==n.datosPronosLocalidad?null:n.datosPronosLocalidad.indiceUV),i.R7$(),i.Y8G("ngIf",!(null!=n.datosPronosLocalidad&&n.datosPronosLocalidad.indiceUV)),i.R7$(4),i.SpI(" ",n.objetoCondicion.condicionTexto," "),i.R7$(),i.Y8G("ngIf",!n.objetoCondicion.condicionTexto),i.R7$(),i.Y8G("ngIf",!n.tipoVel),i.R7$(),i.Y8G("ngIf",n.tipoVel),i.R7$(4),i.SpI("Humedad ",n.objetoCondicion.humedad," %"),i.R7$(),i.Y8G("ngIf",n.expanded)}}function ni(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit;i.R7$(2),i.E5c("",n.dia," \u2022 Min: ",n.temperaturaMinima,"\xb0C \u2022 Max: ",n.temperaturaMaxima,"\xb0C ")}}function ti(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit;i.R7$(2),i.Lme(" ",n.dia," \u2022 Max: ",n.temperaturaMaxima,"\xb0C ")}}function ei(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit,t=i.XpG(4);i.R7$(2),i.E5c("",n.dia," \u2022 Min: ",t.celsiusToFahrenheit(n.temperaturaMinima),"\xb0F \u2022 Max: ",t.celsiusToFahrenheit(n.temperaturaMaxima),"\xb0F")}}function ai(o,e){if(1&o&&(i.j41(0,"ion-card-subtitle")(1,"strong"),i.EFF(2),i.k0s()()),2&o){const n=i.XpG().$implicit,t=i.XpG(4);i.R7$(2),i.Lme(" ",n.dia," \u2022 Max: ",t.celsiusToFahrenheit(n.temperaturaMaxima),"\xb0F")}}function ci(o,e){if(1&o&&i.nrm(0,"img",54),2&o){const n=i.XpG().$implicit;i.Y8G("src","assets/iconosclima/"+n.icono,i.B4B)}}function si(o,e){1&o&&i.nrm(0,"img",54),2&o&&i.Y8G("src","assets/iconosclima/vacio.png",i.B4B)}function ri(o,e){if(1&o&&(i.j41(0,"ion-col"),i.DNE(1,ci,1,1,"img",53)(2,si,1,1,"img",53),i.k0s()),2&o){const n=e.$implicit;i.R7$(),i.Y8G("ngIf",n.icono),i.R7$(),i.Y8G("ngIf",!n.icono)}}function di(o,e){if(1&o&&(i.j41(0,"ion-col")(1,"p")(2,"strong"),i.EFF(3),i.k0s()()()),2&o){const n=e.$implicit;i.R7$(3),i.JRh(n)}}function li(o,e){if(1&o&&(i.j41(0,"ion-card",50)(1,"ion-card-header",51),i.DNE(2,ni,3,3,"ion-card-subtitle",25)(3,ti,3,2,"ion-card-subtitle",25)(4,ei,3,3,"ion-card-subtitle",25)(5,ai,3,2,"ion-card-subtitle",25),i.k0s(),i.j41(6,"ion-card-content",52)(7,"ion-row",28),i.DNE(8,ri,3,2,"ion-col",15),i.k0s(),i.j41(9,"ion-row",28),i.DNE(10,di,4,1,"ion-col",15),i.k0s()()()),2&o){const n=e.$implicit,t=i.XpG(4);i.R7$(2),i.Y8G("ngIf",n.temperaturaMinima&&!t.tipoTemp),i.R7$(),i.Y8G("ngIf",!n.temperaturaMinima&&!t.tipoTemp),i.R7$(),i.Y8G("ngIf",n.temperaturaMinima&&t.tipoTemp),i.R7$(),i.Y8G("ngIf",!n.temperaturaMinima&&t.tipoTemp),i.R7$(3),i.Y8G("ngForOf",n.pronosticodetalle),i.R7$(2),i.Y8G("ngForOf",t.horasDias)}}function gi(o,e){if(1&o&&(i.j41(0,"div",48)(1,"h1",28)(2,"strong"),i.EFF(3,"Pron\xf3sticos"),i.k0s()(),i.j41(4,"p",28)(5,"strong"),i.EFF(6),i.k0s()(),i.DNE(7,li,11,6,"ion-card",49),i.k0s()),2&o){const n=i.XpG(3);i.R7$(6),i.SpI(" ",n.pronosticos[0].timestamp," "),i.R7$(),i.Y8G("ngForOf",n.pronosticos)}}function ui(o,e){if(1&o&&(i.j41(0,"div",55)(1,"ion-card-header",56)(2,"h1",28)(3,"strong"),i.EFF(4),i.k0s()(),i.j41(5,"h2",28),i.EFF(6),i.k0s()(),i.j41(7,"ion-card-content"),i.DNE(8,gi,8,2,"div",43),i.k0s()()),2&o){const n=i.XpG(2);i.R7$(4),i.JRh(n.nombreLocalidad),i.R7$(2),i.JRh(n.fechaActualizado),i.R7$(2),i.Y8G("ngIf",n.expanded&&n.pronosticos)}}function _i(o,e){if(1&o&&(i.j41(0,"div",22)(1,"ion-card",23),i.DNE(2,L,17,6,"ion-card-header",24)(3,oi,35,14,"ion-card-content",25)(4,ui,9,3,"div",26),i.k0s()()),2&o){const n=i.XpG();i.xc7("background-image","url(assets/fondocondicion/"+n.condicionTexto+".jpg)"),i.R7$(2),i.Y8G("ngIf",n.objetoCondicion),i.R7$(),i.Y8G("ngIf",n.objetoCondicion),i.R7$(),i.Y8G("ngIf",!n.objetoCondicion)}}(0,x.kz)();const pi=[{path:"",component:(()=>{var o;class e{constructor(t,a,c,d,u,l,g){this.notificacion=t,this.cookie=a,this.condicion=c,this.pronosticoLocalidad=d,this.router=u,this.coleccionCiudades=l,this.settings=g,this.codCiudadesAgregadas=[],this.ciudadesAgregadas=[],this.distanciaMinima=1/0,this.activatedRoute=(0,i.WQX)(_.nX),this.currentPage=1,this.cidudadesPerPage=10,this.expanded=!0,this.horasDias=["00:00","06:00","12:00","18:00"],this.isLoading=!0,this.partesEstables=[],this.obtenerUbicacionActual(),this.infiniteScrollCiudades()}ngOnInit(){this.folder=this.activatedRoute.snapshot.paramMap.get("id"),this.obtenerNotificaciones(),this.moverImagen(),this.obtenerConfigs(),this.dataUpdateSubscription=(0,P.Y)(6e4).subscribe(()=>{this.obtenerUbicacionActual()})}ngOnDestroy(){this.codCiudadesAgregadasSubscription&&this.codCiudadesAgregadasSubscription.unsubscribe(),this.ciudadesAgregadasSubscription&&this.ciudadesAgregadasSubscription.unsubscribe(),this.dataUpdateSubscription&&this.dataUpdateSubscription.unsubscribe()}moverImagen(){const t=document.querySelector(".imagen-campana");setInterval(()=>{null==t||t.classList.add("animacion-cascabel"),setTimeout(()=>{null==t||t.classList.remove("animacion-cascabel")},1e3)},7e3)}obtenerNotificaciones(){let t=0;this.notificacion.obtenerNotificaciones().subscribe(a=>{a.forEach(c=>{const u=c.texto.split("<br>").filter(g=>""!=g);this.partesEstables=u.map(g=>this.decodeHTMLEntities(g));const l={};this.partesEstables.forEach((g,h)=>{l[h+1]=g}),a[t].partes=l,t+=1}),this.notificacionFinal=a,console.log("Notificacion Final",this.notificacionFinal)})}decodeHTMLEntities(t){const a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#39;":"'","&Aacute;":"\xc1","&aacute;":"\xe1","&Eacute;":"\xc9","&eacute;":"\xe9","&Iacute;":"\xcd","&iacute;":"\xed","&Oacute;":"\xd3","&oacute;":"\xf3","&Uacute;":"\xda","&uacute;":"\xfa","&Ntilde;":"\xd1","&ntilde;":"\xf1"};return t.replace(/&[^\s;]+;/g,c=>a[c]||c)}obtenerDatosActualesCiudadesFav(){this.codCiudadesAgregadasSubscription=this.coleccionCiudades.codCiudadesAgregadas$.subscribe(t=>{if(0===t.length)this.ciudadesAgregadas=[];else{const a=t.map(c=>this.pronosticoLocalidad.obtenerLocalidadCompleta(c));(0,F.p)(a).subscribe(c=>{console.log("resultados antes de filtrar",c),c=c.filter(d=>d.data.length>0),console.log("resultados",c),JSON.stringify(c.map(d=>d.data[0]))!==JSON.stringify(this.ciudadesAgregadas)?(this.isLoading=!0,this.ciudadesAgregadas=c.map(d=>d.data[0]),console.log("ciudades agregadas",this.ciudadesAgregadas),localStorage.setItem("ciudadesAgregadas",JSON.stringify(this.ciudadesAgregadas))):console.log("no hay cambios en ciudades agregadas")})}})}obtenerConfigs(){var t=this;return(0,f.A)(function*(){let a=yield p.w.get({key:"tipoTemperatura"});(!a||""===a.value)&&(yield p.w.set({key:"tipoTemperatura",value:"true"}),a={value:"true"}),t.settings.setTemperatura("true"===a.value);let d=yield p.w.get({key:"tipoVelocidad"});(!d||""===d.value)&&(yield p.w.set({key:"tipoVelocidad",value:"true"}),d={value:"true"}),t.settings.setVelocidadEn("true"===d.value),t.settings.tipoTemperatura$.subscribe(l=>{console.log("tipo de temperatura",l),t.tipoTemp=l}),t.settings.tipoVelocidad$.subscribe(l=>{console.log("tipo de Velocidad",l),t.tipoVel=l})})()}celsiusToFahrenheit(t){return Math.round(9*t/5+32)}kmhtoMph(t){return Math.round(t/1.609344)}obtenerUbicacionActual(){var t=this;return(0,f.A)(function*(){try{const a={enableHighAccuracy:!0,timeout:1e4},c=yield C.L.getCurrentPosition(a);t.coordenadas={latitude:c.coords.latitude,longitude:c.coords.longitude},t.obtenerLocalicacionMasCercana(),console.log("Ubicaci\xf3n obtenida aqui:",t.coordenadas)}catch(a){console.error("Error al obtener la ubicaci\xf3n:",a),t.coordenadas={latitude:-33.464842,longitude:-70.762205},t.obtenerLocalicacionMasCercana(),console.log("Ubicaci\xf3n por defecto utilizada:",t.coordenadas)}})()}solicitarCiudadManualmente(){var t=this;return(0,f.A)(function*(){t.condicion.getDataLocalidad().subscribe(c=>{console.log("Ciudades",c),t.ciudades2=c});let a=prompt("Por favor, ingresa tu ciudad:");a?(console.log("Ciudad ingresada:",a),t.obtenerDatosPronosticoConParametro(a)):t.router.navigate(["/ciudades"])})()}toRadians(t){return t*(Math.PI/180)}haversine(t,a,c,d){const l=this.toRadians(c-t),g=this.toRadians(d-a),h=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(c))*Math.sin(g/2)*Math.sin(g/2);return 2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))*6371}obtenerLocalicacionMasCercana(){this.condicion.getDataLocalidad().subscribe(t=>{this.ciudades=t,console.log("ciudades",this.ciudades),t.forEach(a=>{const c=this.haversine(this.coordenadas.latitude,this.coordenadas.longitude,a.lat,a.lng);c<this.distanciaMinima&&(this.distanciaMinima=c,this.puntoMasCercano=a)}),this.codigoLocalidad=this.puntoMasCercano.codigo,this.obtenerDatosPronostico()})}obtenerDatosPronostico(){this.pronosticoLocalidad.obtenerLocalidadCompleta(this.codigoLocalidad).subscribe(t=>{if(!t||!t.data||0===t.data.length)return console.error("No se encontraron datos para la localidad"),void(this.isLoading=!0);console.log(t.data),this.datosPronosLocalidad=t.data[0],this.pronosticos=this.datosPronosLocalidad.pronostico,this.nombreLocalidad=this.datosPronosLocalidad.nombre,this.infoSol=this.datosPronosLocalidad.infoSol,console.log("info sol",this.infoSol),console.log("pronostico localidad",this.pronosticos),console.log("nombre ciudad",this.nombreLocalidad),this.isLoading=!1,this.datosPronosLocalidad.condicionActual?(this.objetoCondicion=this.datosPronosLocalidad.condicionActual,this.fechaActualizado=this.objetoCondicion.timestamp,this.vientoFuerza=parseInt(this.objetoCondicion.vientoFuerza),this.vientoDireccion=parseInt(this.objetoCondicion.vientoDireccion),this.iconoViento=this.obtenerIconoDireccionViento(),this.condicionTexto=this.objetoCondicion.condicionTexto.toLowerCase().replace(/\s/g,"")):(this.objetoCondicion=null,this.fechaActualizado="",this.vientoFuerza=0,this.vientoDireccion=0,this.iconoViento="default_wind_icon.png",this.condicionTexto="No disponible")},t=>{this.isLoading=!0,console.error("Error al obtener datos del pron\xf3stico",t)})}obtenerDatosPronosticoConParametro(t){this.pronosticoLocalidad.obtenerLocalidadCompleta(t).subscribe(a=>{this.datosPronosLocalidad=a.data[0],console.log("Estos son los datos:",this.datosPronosLocalidad),a.data!==this.datosPronosLocalidad?(this.isLoading=!1,this.datosPronosLocalidad=a.data[0],this.pronosticos=this.datosPronosLocalidad.pronostico,this.nombreLocalidad=this.datosPronosLocalidad.nombre,this.objetoCondicion=this.datosPronosLocalidad.condicionActual,this.fechaActualizado=this.objetoCondicion.timestamp,this.vientoFuerza=parseInt(this.objetoCondicion.vientoFuerza),this.vientoDireccion=parseInt(this.objetoCondicion.vientoDireccion),this.iconoViento=this.obtenerIconoDireccionViento(),this.condicionTexto=this.objetoCondicion.condicionTexto.toLowerCase().replace(/\s/g,""),console.log("objeto condicion",this.objetoCondicion),console.log("condicion texto",this.condicionTexto),console.log("pronostico localidad",this.datosPronosLocalidad),console.log("datos",a),console.log("hay cambios")):(console.log("no hay cambios"),this.isLoading=!1),this.isLoading=!1},a=>{this.isLoading=!1,console.error("Error al obtener datos del pron\xf3stico",a)})}condicionTextoMinusculas(t){return t.toLowerCase().replace(/\s/g,"")}obtenerIconoDireccionViento(){return 0==this.vientoDireccion&&0==this.vientoFuerza?(this.vientoCondicion="calma","assets/iconosviento/calma.png"):this.vientoDireccion>348?(this.vientoCondicion="N","assets/iconosviento/n.png"):this.vientoDireccion>326?(this.vientoCondicion="NNO","assets/iconosviento/nno.png"):this.vientoDireccion>303?(this.vientoCondicion="NO","assets/iconosviento/no.png"):this.vientoDireccion>282?(this.vientoCondicion="ONO","assets/iconosviento/ono.png"):this.vientoDireccion>258?(this.vientoCondicion="O","assets/iconosviento/o.png"):this.vientoDireccion>236?(this.vientoCondicion="OSO","assets/iconosviento/oso.png"):this.vientoDireccion>213?(this.vientoCondicion="SO","assets/iconosviento/so.png"):this.vientoDireccion>191?(this.vientoCondicion="SSO","assets/iconosviento/sso.png"):this.vientoDireccion>168?(this.vientoCondicion="S","assets/iconosviento/s.png"):this.vientoDireccion>146?(this.vientoCondicion="SSE","assets/iconosviento/sse.png"):this.vientoDireccion>123?(this.vientoCondicion="SE","assets/iconosviento/se.png"):this.vientoDireccion>101?(this.vientoCondicion="ESE","assets/iconosviento/ese.png"):this.vientoDireccion>78?(this.vientoCondicion="E","assets/iconosviento/e.png"):this.vientoDireccion>56?(this.vientoCondicion="ENE","assets/iconosviento/ene.png"):this.vientoDireccion>33?(this.vientoCondicion="NE","assets/iconosviento/ne.png"):this.vientoDireccion>11?(this.vientoCondicion="NNE","assets/iconosviento/nne.png"):(this.vientoCondicion="N","assets/iconosviento/n.png")}infiniteScrollCiudades(t){this.condicion.getDataLocalidad().subscribe(a=>{this.ciudades=a,setTimeout(()=>{for(let c=0;c<this.cidudadesPerPage;c++)this.ciudades.length<a.length&&this.ciudades.push(a[this.ciudades.length]);t&&t.target.complete()},1e3),this.currentPage++})}seleccionarCiudad(t){this.codigoCiudad=t.codigo,this.router.navigate(["/ciudad",t.codigo])}redondearTemperatura(){return Math.floor(this.objetoCondicion.temperatura)}redondearTemperaturaConParametro(t){return Math.floor(t)}toggleAccordion(){this.expanded=!this.expanded}agregarCiudad(t){this.coleccionCiudades.agregarCiudad(t)}eliminarCiudad(t){this.coleccionCiudades.eliminarCiudad(t)}}return(o=e).\u0275fac=function(t){return new(t||o)(i.rXU(M.m),i.rXU(j.O),i.rXU(R.g),i.rXU($.Q),i.rXU(_.Ix),i.rXU(A.n),i.rXU(E.h))},o.\u0275cmp=i.VBU({type:o,selectors:[["app-condicion-actual"]],decls:14,vars:3,consts:[["modal",""],[2,"display","flex","justify-content","space-between"],["slot","start"],["color","primary","menu","main-menu"],["slot","end",1,"campana"],["id","open-modal","src","assets/icon/campana.png","alt","logo",1,"imagen-campana",2,"height","30px","width","30px","margin-right","1vh"],["slot","end","href","https://www.dgac.gob.cl/"],["id","logo","src","assets/icon/DGAC-logo.jpg","alt","logo",2,"height","40px","width","30px","margin-right","1vh"],["slot","end","href","https://archivos.meteochile.gob.cl/portaldmc/movil/movil_inicio.php"],["id","logo","src","assets/icon/DMC-logo.png","alt","logo",2,"height","40px","width","40px","margin-right","1vh"],["trigger","open-modal"],["style","background-color: #04317a;",3,"backgroundImage",4,"ngIf"],["slot","end"],["color","light",3,"click"],["size","large","name","close-sharp"],[4,"ngFor","ngForOf"],["src","assets/icon/anuncio.png",4,"ngIf"],["src","assets/icon/alerta.png",4,"ngIf"],["src","assets/icon/alarma.png",4,"ngIf"],["src","assets/icon/anuncio.png"],["src","assets/icon/alerta.png"],["src","assets/icon/alarma.png"],[2,"background-color","#04317a"],[2,"box-shadow","0px 2px 0px 1px rgb(143, 135, 135)","display","contents","color","white"],["style","color: white; margin-top: 5vh",4,"ngIf"],[4,"ngIf"],["style","background-color:  #04317a; overflow: auto; background-position: center;",4,"ngIf"],[2,"color","white","margin-top","5vh"],[2,"text-align","center"],[2,"display","flex","justify-content","center","align-items","center"],[2,"text-align","center","margin-right","20px"],[2,"height","50px",3,"src"],["style","\n            font-size: 100px;\n            font-weight: bold;\n            display: block;\n            margin: auto;\n            text-align: center;\n          ",4,"ngIf"],["style","\n        font-size: 100px;\n        font-weight: bold;\n        display: block;\n        margin: auto;\n        text-align: center;\n      ",4,"ngIf"],[1,"ion-text-center"],[2,"display","flex","align-items","center"],[2,"border-radius","50%","display","block","margin-left","auto","margin-right","auto","width","50px","height","50px",3,"src"],["alt","Clima","style","height: 8vh; width: 8vh",3,"src",4,"ngIf"],["alt","Clima","style","height: 8vh; width: 8vh; width: 50px;\n        height: 50px;",3,"src",4,"ngIf"],["alt","viento",2,"height","50px","width","50px",3,"src"],["src","assets/wet.png","alt","viento",2,"height","50px","width","50px"],[2,"text-align","center","justify-content","center"],["style","text-align: center; justify-content: center",4,"ngIf"],["class","accordion-content",4,"ngIf"],[2,"font-size","100px","font-weight","bold","display","block","margin","auto","text-align","center"],[2,"font-size","3rem","position","relative","top","-2rem"],["alt","Clima",2,"height","8vh","width","8vh",3,"src"],["alt","Clima",2,"height","8vh","width","8vh","width","50px","height","50px",3,"src"],[1,"accordion-content"],["style","position: relative",4,"ngFor","ngForOf"],[2,"position","relative"],[2,"text-align","center","display","contents"],[2,"display","contents"],["style","height: 50px; width: 50px",3,"src",4,"ngIf"],[2,"height","50px","width","50px",3,"src"],[2,"background-color","#04317a","overflow","auto","background-position","center"],[2,"color","white","margin-top","5vh","margin-bottom","-5VH"]],template:function(t,a){1&t&&(i.j41(0,"ion-toolbar",1)(1,"ion-buttons",2),i.nrm(2,"ion-menu-button",3),i.k0s(),i.j41(3,"a",4),i.nrm(4,"img",5),i.k0s(),i.j41(5,"a",6),i.nrm(6,"img",7),i.k0s(),i.j41(7,"a",8),i.nrm(8,"img",9),i.k0s(),i.j41(9,"ion-modal",10,0),i.DNE(11,y,9,1,"ng-template"),i.k0s()(),i.j41(12,"body"),i.DNE(13,_i,5,5,"div",11),i.k0s()),2&t&&(i.R7$(12),i.xc7("background-image","url(/assets/fondolista/desierto.jpg)"),i.R7$(),i.Y8G("ngIf",!a.isLoading))},dependencies:[m.Sq,m.bT,s.mC,s.Jm,s.QW,s.b_,s.I9,s.ME,s.HW,s.hU,s.W9,s.lO,s.iq,s.uz,s.he,s.nf,s.MC,s.JI,s.ln,s.BC,s.ai,s.Sb],styles:['@charset "UTF-8";@font-face{font-family:Open Sans;src:url(OpenSans-Bold.c1fc02c2ea5dd4e9.ttf) format("truetype")}*[_ngcontent-%COMP%]{font-family:Open Sans}ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;justify-content:center;align-items:center;left:0;right:0}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#container[_ngcontent-%COMP%]   div.uv[_ngcontent-%COMP%]{color:#0ff;height:50px;width:50px;border-radius:50%;justify-content:center;align-items:center;text-align:center}.scrollable-content[_ngcontent-%COMP%]{height:100vh;overflow-y:auto}ion-card[_ngcontent-%COMP%]{background:#ffffffa6}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .65)}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.rotar[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_girar 5s infinite linear;transform-style:preserve-3d}@keyframes _ngcontent-%COMP%_girar{0%{transform:rotateY(0)}to{transform:rotateY(360deg)}}body[_ngcontent-%COMP%]{background-size:cover;background-position:center center}ion-modal[_ngcontent-%COMP%]{--height: 50%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}ion-modal[_ngcontent-%COMP%]::part(backdrop){background:#d1d5db;opacity:1}ion-modal[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #04317A;--color: white}.imagen-campana[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:1vh}.animacion-cascabel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cascabel .5s ease}@keyframes _ngcontent-%COMP%_cascabel{0%,to{transform:rotate(0)}25%{transform:rotate(10deg)}50%{transform:rotate(-10deg)}75%{transform:rotate(5deg)}}div[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto}']}),e})()}];let hi=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[_.iI.forChild(pi),_.iI]}),e})(),mi=(()=>{var o;class e{}return(o=e).\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.$C({type:o}),o.\u0275inj=i.G2t({imports:[m.MD,b.YN,s.bv,hi]}),e})()}}]);