"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4599],{4599:(v,_,t)=>{t.r(_),t.d(_,{CiudadesPageModule:()=>j});var l=t(177),m=t(9417),r=t(9364),u=t(5260),n=t(4438),p=t(3797),g=t(1247),h=t(8152);function f(o,s){if(1&o){const i=n.RV6();n.j41(0,"ion-item",16),n.bIt("click",function(){const a=n.eBV(i).$implicit,c=n.XpG(5);return n.Njj(c.seleccionarCiudad(a))}),n.j41(1,"ion-label")(2,"strong"),n.EFF(3),n.k0s()(),n.nrm(4,"ion-icon",17),n.k0s()}if(2&o){const i=s.$implicit;n.R7$(3),n.JRh(i.nombre)}}function d(o,s){if(1&o&&(n.j41(0,"ion-card-content")(1,"ion-list"),n.DNE(2,f,5,1,"ion-item",15),n.k0s()()),2&o){const i=n.XpG(2).$implicit,e=n.XpG(2);n.R7$(2),n.Y8G("ngForOf",e.zonas[i])}}function C(o,s){if(1&o){const i=n.RV6();n.j41(0,"ion-card",11),n.bIt("click",function(){n.eBV(i);const a=n.XpG().$implicit,c=n.XpG(2);return n.Njj(c.toggleAccordion(a))}),n.j41(1,"ion-card-header")(2,"ion-label"),n.EFF(3),n.k0s(),n.j41(4,"div",12),n.nrm(5,"ion-icon",13),n.k0s()(),n.DNE(6,d,3,1,"ion-card-content",14),n.k0s()}if(2&o){const i=n.XpG().$implicit,e=n.XpG(2);n.R7$(3),n.JRh(i),n.R7$(2),n.Y8G("name",e.isAccordionOpen(i)?"chevron-up-sharp":"chevron-down-sharp"),n.R7$(),n.Y8G("ngIf",e.isAccordionOpen(i))}}function M(o,s){if(1&o&&(n.qex(0),n.DNE(1,C,7,3,"ion-card",10),n.bVm()),2&o){const i=s.$implicit,e=n.XpG(2);n.R7$(),n.Y8G("ngIf",e.zonas[i]&&e.zonas[i].length>0)}}function O(o,s){if(1&o&&(n.j41(0,"ion-list",8),n.DNE(1,M,2,1,"ng-container",9),n.k0s()),2&o){const i=n.XpG();n.R7$(),n.Y8G("ngForOf",i.regionesOrdenadas)}}const b=[{path:"",component:(()=>{var o;class s{constructor(e,a,c,P,x){this.condicion=e,this.obtenerLocalidadService=a,this.router=c,this.route=P,this.coleccionCiudadesService=x,this.zonas={},this.accordionStates={},this.fondoActualIndex=0,this.images=["assets/fondolista/cordillera.jpg","assets/fondolista/costa.jpg","assets/fondolista/desierto.jpg","assets/fondolista/isla.jpg","assets/fondolista/patagonia.jpg","assets/fondolista/valle.jpg","assets/fondolista/glaciar.jpg"],this.currentImage=this.images[0],this.imageIndex=0,this.regionesOrdenadas=["Regi\xf3n de Arica y Parinacota","Regi\xf3n de Tarapac\xe1","Regi\xf3n de Antofagasta","Regi\xf3n de Atacama","Regi\xf3n de Coquimbo","Regi\xf3n de Valpara\xedso","Regi\xf3n Metropolitana de Santiago","Regi\xf3n del Libertador General Bernardo O'Higgins","Regi\xf3n del Maule","Regi\xf3n del \xd1uble","Biob\xedo","Regi\xf3n de la Araucan\xeda","Regi\xf3n de los R\xedos","Regi\xf3n de los Lagos","Regi\xf3n de Ays\xe9n del General Carlos Ib\xe1\xf1ez del Campo","Regi\xf3n de Magallanes y de la Ant\xe1rtica Chilena"],this.ciudades=[],this.zonas={}}ngOnInit(){this.Ciudades(),setInterval(()=>{this.imageIndex=(this.imageIndex+1)%this.images.length,this.currentImage=this.images[this.imageIndex]},5e3)}Ciudades(){this.condicion.getDataLocalidad().subscribe(e=>{this.ciudades=e,this.codciudades=this.ciudades.codigo,this.ciudades.forEach(a=>{const c=a.region_nombre;this.zonas[c]||(this.zonas[c]=[]),this.zonas[c].push(a)}),console.log("Ciudades agrupadas por regi\xf3n:",this.zonas);for(const a in this.zonas)this.zonas[a].sort((c,P)=>c.nombre.localeCompare(P.nombre));this.ciudadesFiltradas=[...this.ciudades]})}toggleAccordion(e){const a=this.accordionStates[e];for(const c in this.accordionStates)this.accordionStates[c]=!1;this.accordionStates[e]=!a}isAccordionOpen(e){return this.accordionStates[e]}filtrarCiudades(e){const a=e.target.value.toLowerCase();this.ciudadesFiltradas=this.ciudades.filter(c=>c.nombre.toLowerCase().indexOf(a)>-1)}seleccionarCiudad(e){this.router.navigate(["/condicion-ciudad",e.codigo])}}return(o=s).\u0275fac=function(e){return new(e||o)(n.rXU(p.g),n.rXU(g.Q),n.rXU(u.Ix),n.rXU(u.nX),n.rXU(h.n))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-ciudades"]],decls:10,vars:1,consts:[[2,"display","flex","justify-content","space-between"],["slot","start"],["color","primary","menu","main-menu"],["slot","end","href","https://www.dgac.gob.cl/"],["id","logo","src","assets/icon/DGAC-logo.jpg","alt","logo",2,"height","40px","width","30px","margin-right","1vh"],["slot","end","href","https://archivos.meteochile.gob.cl/portaldmc/movil/movil_inicio.php"],["id","logo","src","assets/icon/DMC-logo.png","alt","logo",2,"height","40px","width","40px","margin-right","1vh"],["style","margin-top: 8vh;","class","menu-items","lines","none",4,"ngIf"],["lines","none",1,"menu-items",2,"margin-top","8vh"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[2,"text-align","center"],[3,"name"],[4,"ngIf"],["slot","end",3,"click",4,"ngFor","ngForOf"],["slot","end",3,"click"],["name","chevron-forward-sharp"]],template:function(e,a){1&e&&(n.j41(0,"ion-toolbar",0)(1,"ion-buttons",1),n.nrm(2,"ion-menu-button",2),n.k0s(),n.j41(3,"a",3),n.nrm(4,"img",4),n.k0s(),n.j41(5,"a",5),n.nrm(6,"img",6),n.k0s()(),n.j41(7,"body")(8,"div"),n.DNE(9,O,2,1,"ion-list",7),n.k0s()()),2&e&&(n.R7$(9),n.Y8G("ngIf",a.ciudadesFiltradas))},dependencies:[l.Sq,l.bT,r.QW,r.b_,r.I9,r.ME,r.iq,r.uz,r.he,r.nf,r.MC,r.ai],styles:['@font-face{font-family:Open Sans;src:url(OpenSans-Bold.c1fc02c2ea5dd4e9.ttf) format("truetype")}*[_ngcontent-%COMP%]{font-family:Open Sans}ion-toolbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .65)}ion-searchbar[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .65)}body[_ngcontent-%COMP%]{overflow-y:auto;background-image:url(/assets/fondolista/costa.jpg);background-size:cover;background-position:center center;background-repeat:no-repeat;overflow:auto;display:flex}.fondo-div[_ngcontent-%COMP%]{height:100%}.background-image[_ngcontent-%COMP%]{transition:background-image .5s ease-in-out}.menu-items[_ngcontent-%COMP%]{background:#fff0}.menu-items[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, 0)}.menu-items[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#212121;text-align:center;background:#fff0}.menu-items[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .4)}.menu-items[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, 0)}.menu-items[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#212121;--background: rgba(255, 255, 255, 0);text-align:center}.menu-items[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{background:#fff0}.menu-items[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100px;background-size:cover}']}),s})()}];let R=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[u.iI.forChild(b),u.iI]}),s})(),j=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[l.MD,m.YN,r.bv,R]}),s})()},3797:(v,_,t)=>{t.d(_,{g:()=>p});var l=t(7673),m=t(8141),r=t(9437),u=t(4438),n=t(1626);let p=(()=>{var g;class h{constructor(d){this.http=d,this.apiCondicion="./assets/db.json"}getDataLocalidad(){return this.cachedData?(0,l.of)(this.cachedData):this.http.get(this.apiCondicion).pipe((0,m.M)(d=>{this.cachedData=d.map(C=>({...C,pronostico:null}))}),(0,r.W)(d=>(console.log("Error obteniendo datos de localidad:",d),(0,l.of)(null))))}refrescarInformacionDeLocalidad(){return this.http.get(this.apiCondicion).pipe((0,m.M)(d=>{this.cachedData=d}),(0,r.W)(d=>(console.log("Error refrescando informaci\xf3n de localidad:",d),(0,l.of)(null))))}}return(g=h).\u0275fac=function(d){return new(d||g)(u.KVO(n.Qq))},g.\u0275prov=u.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),h})()}}]);